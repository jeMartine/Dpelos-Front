<app-header-veterinario></app-header-veterinario>
<main>
  <div class="container-titulo">
    <p>Actualizar Mascota</p>
  </div>
  <form
    id="formUpdateMascota"
    #mascotaUpdateForm="ngForm"
    (ngSubmit)="mascotaUpdate()"
  >
  <div class="row duenoField">
    <div class=" col-md-6">
      <input
        name="cedulaDueno"
        type="number"
        class="form-control"
        id="cedulaDueno"
        placeholder="Cédula del dueño"
        required
        [(ngModel)]="cedulaDueno"
        (blur)="verificarDueno()"
      />
    </div>
  
    <div 
        *ngIf="nombreDueno"
        class="col-md-6"
        id="nombreDuenoContainer"
      >
      <input
        type="text"
        class="form-control col-md-6"
        id="nombreDueno"
        placeholder="Nombre del Dueño"
        readonly
        [value]="nombreDueno"
      />
    </div>
  
    <div 
          class="col-md-6"
          id="agregarDuenoContainer"
          *ngIf="!nombreDueno">
      <a
        type="button"
        class="btn btn-primary ms-4"
        id="btnAgregarDueno"
        [routerLink]="['/dueno/add']">
        Agregar Dueño
      </a>
    </div>
  </div>

    <div class="row">
      <div class="form-group col-md-6">
        <input
          type="text"
          name="nombreMascota"
          class="form-control"
          id="nombreMascota"
          placeholder="Nombre de la mascotas"
          required
          [(ngModel)]="mascota.nombreMascota"
          pattern="[A-Za-zÀ-ÿ\s]+"
          title="El nombre solo puede contener letras y espacios"
        />
      </div>
      <div class="form-group col-md-6">
        <input
          type="number"
          name="edadMascota"
          class="form-control"
          id="edadMascota"
          placeholder="Edad"
          required
          [(ngModel)]="mascota.edadMascota"
        />
      </div>
    </div>

    <div class="row">
      <div class="form-group col-md-6">
        <input
          type="text"
          name="urlFotoMascota"
          class="form-control"
          id="urlFotoMascota"
          placeholder="Url foto"
          required
          [(ngModel)]="mascota.urlFotoMascota"
        />
      </div>

      <!-- Menú Desplegable de Razas -->
      <div class="form-group col-md-6">
        <select 
          [(ngModel)]="mascota.raza" 
          name="razaMascota" 
          class="form-control"
          required>
            <option value="" disabled selected>Selecciona una raza</option>
            <option *ngFor="let raza of razas" [ngValue]="raza">
              {{ raza.razaMascota }}
            </option>
        </select>
      </div>
    </div>

    <div class="row">
      <div class="form-group col-md-6">
      <!-- Menú Desplegable de Enfermedades -->
      <select 
        [(ngModel)]="mascota.enfermedad" 
        name="enfermedadMascota"
        class="form-control"
        required>
          <option value="" disabled selected>Enfermedad de la mascota</option>
          <option *ngFor="let enfermedad of enfermedades" [ngValue]="enfermedad">
            {{ enfermedad.nombreEnfermedad }}
          </option>
      </select>
      </div>
    </div>

    <div class="botones">
      <button
        type="submit"
        class="btn btn-primary mr-4"
        id="ActualizarMascota"
        [disabled]="!mascotaUpdateForm.form.valid"
      >
        Actualizar Mascota
      </button>
      <a type="button" class="btn btn-secundary" (click)="regresar()"
        >Regresar</a
      >
    </div>
  </form>
</main>
<app-footer></app-footer>
