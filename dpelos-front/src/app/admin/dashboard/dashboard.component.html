<app-header-admin></app-header-admin>
<section id="main" class="justify-content-center display-flex align-center">
  <div class="container">
    <div class="row">
      <div class="col-md-5">
        <div class="card-media" style="width: fit-content; height: fit-content">
          <p style="margin-bottom: 10px; font-weight: bold; text-align: center">
            Tratamientos por Tipo de Medicamento
          </p>
          <table class="table">
            <thead>
              <tr>
                <th>Nombre Medicamento</th>
                <th>Tratamientos Atendidos</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let tratamiento of tratamientosTipoDroga">
                <td>{{ tratamiento.nombreDroga }}</td>
                <td>{{ tratamiento.tratamientoCount }}</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>

      <div class="col-md-7">
        <div class="row">
          <div class="col-12">
            <div
              class="card-wrapper"
              style="display: flex; justify-content: center; flex-wrap: wrap"
            >
              <div
                class="card-media"
                style="
                  flex: 1;
                  color: rgb(0, 166, 255);
                  text-align: center;
                  min-width: 150px;
                  margin: 10px;
                "
              >
                <i class="fas fa-user-md" style="font-size: 24px"></i>
                <p><b>Total Veterinarios:</b> {{ totalVets }}.</p>
              </div>
              <div
                class="card-media"
                style="
                  flex: 1;
                  color: rgb(46, 220, 144);
                  text-align: center;
                  min-width: 150px;
                  margin: 10px;
                "
              >
                <i class="fas fa-pills" style="font-size: 24px"></i>
                <p><b>Total Medicamentos:</b> {{ totalDrogas }}.</p>
              </div>
              <div
                class="card-media"
                style="
                  flex: 1;
                  color: rgb(0, 166, 255);
                  text-align: center;
                  min-width: 150px;
                  margin: 10px;
                "
              >
                <i class="fas fa-briefcase-medical" style="font-size: 24px"></i>
                <p id="totalTratamientos">
                  <b>Tratamientos en el último mes:</b>
                  {{ totalTratamientos }}.
                </p>
              </div>
              <div
                class="card-media"
                style="
                  flex: 1;
                  color: rgb(46, 220, 144);
                  text-align: center;
                  min-width: 150px;
                  margin: 10px;
                "
              >
                <i class="fas fa-paw" style="font-size: 24px"></i>
                <p>
                  <b>Mascotas registradas en D'Pelos (Activas):</b>
                  {{ totalMascotasActivas }}.
                </p>
              </div>
            </div>
          </div>
        </div>
        <div
          class="card-wrapper"
          style="display: flex; justify-content: center; flex-wrap: wrap"
        >
          <div
            class="card-media"
            style="
              flex: 1;
              color: #ff8f34;
              text-align: center;
              min-width: 150px;
              margin: 10px;
            "
          >
            <i
              class="fas fa-dollar-sign"
              style="font-size: 28px; margin-right: 10px"
            ></i>
            <p style="margin: 0">
              <b>Total de Ventas de la Veterinaria:</b> ${{
                totalVentas | number : "1.0-0"
              }}.
            </p>
          </div>
          <div
            class="card-media"
            style="
              flex: 1;
              color: #ff8f34;
              text-align: center;
              min-width: 150px;
              margin: 10px;
            "
          >
            <i
              class="fas fa-chart-line"
              style="font-size: 28px; margin-right: 10px"
            ></i>
            <p style="margin: 0" id="totalGanancias">
              <b>Total de Ganancias de la Veterinaria:</b>
              ${{ totalGancias | number : "1.0-0" }}.
            </p>
          </div>
        </div>
        <div
          class="card-wrapper"
          style="display: flex; justify-content: center; flex-wrap: wrap"
        >
          <div
            class="card-media"
            style="
              flex: 1;
              color: #ff6484;
              text-align: center;
              min-width: 150px;
              margin: 10px;
            "
          >
            <p><b>Veterinarios Activos vs Inactivos</b></p>
            <canvas id="veterinariosChart"></canvas>
          </div>
          <div
            class="card-media"
            style="
              flex: 1.4;
              color: #ff6484;
              text-align: center;
              min-width: 150px;
              margin: 10px;
            "
          >
          <p class="mb-4"><b>Top 3 tratamientos</b></p>
            <div
              *ngIf="
                tratamientosMasVendidos && tratamientosMasVendidos.length >= 3
              "
              class="podio"
            >
              <div class="nivel" id="silver">
                <p class="podio-pos" style="color: #b5b5b7;">2</p>
                <p class="podio-nombre">
                  <b>{{ tratamientosMasVendidos[1] }}</b>
                </p>
              </div>

              <div class="nivel" id="gold">
                <i
                  class="fas fa-trophy"
                  style="font-size: 30px; color: #ffcc00"
                ></i>
                <p class="podio-pos" style="color: #ffcc00;">1</p>
                <p class="podio-nombre">
                  <b>{{ tratamientosMasVendidos[0] }}</b>
                </p>
              </div>
              <div class="nivel" id="bronze">
                <p class="podio-pos" style="color: #c07f30;">3</p>
                <p class="podio-nombre">
                  <b>{{ tratamientosMasVendidos[2] }}</b>
                </p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- Botón regresar -->
<div class="d-flex justify-content-center mb-4">
  <a class="btn btn-primary ml-6" [routerLink]="['/admin']">Regresar</a>
</div>
<app-footer></app-footer>
